<form action="<%= submitPath  %>" method="POST" enctype="multipart/form-data">
    <input type="hidden" name="_csrf" value="<%= locals.csrfToken %>">

    <p>
        <label for="title">Title</label>
        <input type="text" name="title" id="title" value="<%= product.title  %>" required>
    </p>

    <div id="image-upload-control">
        <p>
            <label for="image">Image</label>
            <input type="file" name="image" id="image" accept="image/png, image/jpg" <% if(imageRequired){ %> required<% } %>>
        </p>
        <img src="" alt="Selected image">
    </div>

    <p>
        <label for="summary">Summary</label>
        <input type="text" name="summary" id="summary" value="<%= product.summary  %>" required>
    </p>
    <p>
        <label for="price">Price</label>
        <input type="number" name="price" id="price" step="0.01" value="<%= product.price  %>" min="0">
    </p>
    <p>
        <label for="description">Desciption</label>
        <textarea name="description" id="" cols="30" rows="7"  required><%= product.description  %></textarea>
    </p>
    <p>
        <button type="reset" class="btn btn-alt">Reset</button>
        <button type="save" class="btn">Save</button>
    </p>
   </form>
   <script>
    const imagePickerElement = document.querySelector('#image-upload-control input');
const imagePreviewElement = document.querySelector('#image-upload-control img');

function updateImagePreview(){

    const files = imagePickerElement.files;

    if(!files || files.length == 0){
        imagePreviewElement.style.display = 'none';
        return;
    }

    const pickedFile = files[0];

    console.log(imagePreviewElement.getAttributeNames());

    imagePreviewElement.src = URL.createObjectURL(pickedFile);
    imagePreviewElement.style.display = 'block';
}

imagePickerElement.addEventListener('change', updateImagePreview);
   </script>